import{w as U,x as W,a as x,p as e,L as M}from"./chunk-EF7DTUVF-DFp-VzBN.js";import{I as q,d as $}from"./dataManager-qUq1lbjI.js";import{s as h}from"./supabaseDataManager-CPgVSS-r.js";const Q=U(function(){const[b,y]=W(),[m,j]=x.useState([]),[N,v]=x.useState(!0),[C,i]=x.useState(null),[w,A]=x.useState("provider"),[R,E]=x.useState(!1),[L,p]=x.useState(null),[S,k]=x.useState("success");x.useEffect(()=>{async function r(){try{await $.initialize();const t=await $.getAllServices();j(t)}catch(t){console.error("Error loading services:",t)}finally{v(!1)}}r();const s=()=>{document.hidden||r()};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[]);const c=(()=>{const r=m.reduce((l,g)=>{const u=g.category||"Uncategorized";return l[u]||(l[u]={count:0,totalPrice:0,services:[]}),l[u].count++,l[u].totalPrice+=g.price,l[u].services.push(g.name),l},{}),s=m.reduce((l,g)=>{const u=g.provider||"Unknown Provider";return l[u]||(l[u]={count:0,totalPrice:0,services:[]}),l[u].count++,l[u].totalPrice+=g.price,l[u].services.push(g.name),l},{}),t=m.map(l=>l.price),n=t.reduce((l,g)=>l+g,0),a=t.length>0?n/t.length:0,o=t.length>0?Math.min(...t):0,f=t.length>0?Math.max(...t):0;return{categoryStats:r,providerStats:s,priceAnalysis:{totalRevenue:n,averagePrice:a,minPrice:o,maxPrice:f,totalServices:m.length}}})(),P=(r,s)=>{const t=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");if(n.download!==void 0){const a=URL.createObjectURL(t);n.setAttribute("href",a),n.setAttribute("download",s),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},I=()=>{const s=[["ID","Service Name","Category","Provider","Price","Duration","Description","Status"].join(",")];m.forEach(a=>{const o=[a.id,`"${a.name}"`,`"${a.category||"Uncategorized"}"`,`"${a.provider||"Unknown Provider"}"`,a.price,`"${a.duration||"N/A"}"`,`"${a.description.replace(/"/g,'""')}"`,a.active!==!1?"Active":"Inactive"];s.push(o.join(","))});const t=s.join(`
`),n=new Date().toISOString().slice(0,19).replace(/:/g,"-");P(t,`services-report-${n}.csv`)},V=()=>{const s=[["Category","Service Count","Average Price","Total Value","Services"].join(",")];Object.entries(c.categoryStats).forEach(([a,o])=>{const f=[`"${a}"`,o.count,(o.totalPrice/o.count).toFixed(2),o.totalPrice.toFixed(2),`"${o.services.join("; ")}"`];s.push(f.join(","))});const t=s.join(`
`),n=new Date().toISOString().slice(0,19).replace(/:/g,"-");P(t,`category-report-${n}.csv`)},D=()=>{const s=[["Provider","Service Count","Total Value","Average Price","Services"].join(",")];Object.entries(c.providerStats).forEach(([a,o])=>{const f=[`"${a}"`,o.count,o.totalPrice.toFixed(2),(o.totalPrice/o.count).toFixed(2),`"${o.services.join("; ")}"`];s.push(f.join(","))});const t=s.join(`
`),n=new Date().toISOString().slice(0,19).replace(/:/g,"-");P(t,`provider-report-${n}.csv`)},T=()=>{const s=[["Metric","Value"].join(",")];[["Total Services",c.priceAnalysis.totalServices],["Total Categories",Object.keys(c.categoryStats).length],["Total Providers",Object.keys(c.providerStats).length],["Average Price",`$${c.priceAnalysis.averagePrice.toFixed(2)}`],["Minimum Price",`$${c.priceAnalysis.minPrice.toFixed(2)}`],["Maximum Price",`$${c.priceAnalysis.maxPrice.toFixed(2)}`],["Total Portfolio Value",`$${c.priceAnalysis.totalRevenue.toFixed(2)}`],["Report Generated",new Date().toLocaleString()]].forEach(([o,f])=>{s.push(`"${o}","${f}"`)});const n=s.join(`
`),a=new Date().toISOString().slice(0,19).replace(/:/g,"-");P(n,`summary-report-${a}.csv`)};x.useEffect(()=>{const r=b.get("success"),s=b.get("deleted"),t=b.get("serviceName");r==="true"&&t?(p(`Service "${t}" added successfully!`),k("success"),y({}),setTimeout(()=>p(null),5e3),setTimeout(()=>{window.location.reload()},1e3)):s==="true"&&t&&(p(`Service "${t}" deleted successfully!`),k("delete"),y({}),setTimeout(()=>p(null),5e3),setTimeout(()=>{window.location.reload()},1e3))},[b,y]),x.useEffect(()=>{if(typeof window<"u"){const r=localStorage.getItem("serviceProviderLoggedIn"),s=localStorage.getItem("serviceProviderUsername");r==="true"?(E(!0),A(s||"provider")):window.location.href="/login"}},[]);const z=()=>{typeof window<"u"&&(localStorage.removeItem("serviceProviderLoggedIn"),localStorage.removeItem("serviceProviderUsername"),window.location.href="/login")},F=r=>{i({...r})},B=async r=>{if(confirm(`Are you sure you want to delete "${r.name}"? This action cannot be undone.`))try{await $.deleteService(r.id)?(j(t=>t.filter(n=>n.id!==r.id)),p(`Service "${r.name}" deleted successfully`),k("delete")):alert("Failed to delete service. Please try again.")}catch(s){console.error("Error deleting service:",s),alert("Error deleting service: "+s.message)}},O=async r=>{try{const s=await $.updateService(r.id,r);s?(j(t=>t.map(n=>n.id===r.id?s:n)),i(null),p(`Service "${r.name}" updated successfully!`),k("success")):alert("Failed to update service. Please try again.")}catch(s){console.error("Error updating service:",s),alert("Error updating service: "+s.message)}},H=()=>{i(null)};return N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard data..."})]})}):R?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Provider Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome back, ",w]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(M,{to:"/add-service",className:`px-3 py-2 rounded-md text-sm font-medium relative group text-white ${h.isConfigured()?"bg-green-600 hover:bg-green-700":"bg-yellow-600 hover:bg-yellow-700"}`,title:h.isConfigured()?"Add a new service":"Setup Supabase to enable service addition",children:["+ Add New Service",h.isConfigured()?"":" (Setup Required)",!h.isConfigured()&&e.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Setup Supabase to enable"})]}),e.jsx("button",{onClick:z,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Logout"})]})]})})}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[L&&e.jsx("div",{className:`mb-6 rounded-md p-4 border ${S==="delete"?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:`h-5 w-5 ${S==="delete"?"text-orange-400":"text-green-400"}`,viewBox:"0 0 20 20",fill:"currentColor",children:S==="delete"?e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}):e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:`text-sm font-medium ${S==="delete"?"text-orange-800":"text-green-800"}`,children:L})}),e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("div",{className:"-mx-1.5 -my-1.5",children:e.jsx("button",{onClick:()=>p(null),className:`inline-flex rounded-md p-1.5 hover:bg-opacity-75 ${S==="delete"?"bg-orange-50 text-orange-500 hover:bg-orange-100":"bg-green-50 text-green-500 hover:bg-green-100"}`,children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Service Reports & Analytics"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:I,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Services CSV"]}),e.jsxs("button",{onClick:V,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4"})}),"Category Report"]}),e.jsxs("button",{onClick:D,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Provider Report"]}),e.jsxs("button",{onClick:T,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Summary Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.priceAnalysis.totalServices})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average Price"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",c.priceAnalysis.averagePrice.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Price Range"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",c.priceAnalysis.minPrice," - $",c.priceAnalysis.maxPrice]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Categories"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Object.keys(c.categoryStats).length})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Services by Category"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:Object.entries(c.categoryStats).map(([r,s])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.count," service",s.count!==1?"s":""," • Avg: $",(s.totalPrice/s.count).toFixed(2)]}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"text-xs text-gray-400",children:["Services: ",s.services.join(", ")]})})]}),e.jsx("div",{className:"ml-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.count})})]},r))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Services by Provider"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:Object.entries(c.providerStats).map(([r,s])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.count," service",s.count!==1?"s":""," • Total Value: $",s.totalPrice.toFixed(2)]}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"text-xs text-gray-400",children:["Services: ",s.services.join(", ")]})})]}),e.jsx("div",{className:"ml-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:s.count})})]},r))})})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Services"}),e.jsxs(M,{to:"/add-service",className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white relative group ${h.isConfigured()?"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500":"bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"}`,title:h.isConfigured()?"Add a new service":"Setup Supabase to enable service addition",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Service",h.isConfigured()?"":" (Setup Required)",!h.isConfigured()&&e.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Setup Supabase to enable"})]})]}),h.isConfigured()?e.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-400",children:e.jsxs("p",{className:"text-green-800",children:[e.jsx("strong",{children:"Database Connected:"})," You have ",m.length," services listed. Supabase is configured and you can add/edit services that will be saved to the database."]})}):e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 border-l-4 border-yellow-400",children:e.jsxs("p",{className:"text-yellow-800",children:[e.jsx("strong",{children:"Setup Required:"})," You have ",m.length," services listed from static data. To enable adding/editing services, configure Supabase (free database). See ",e.jsx("strong",{children:"SUPABASE_SETUP.md"})," for instructions."]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[m.length===0&&e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsxs("p",{className:"text-gray-500",children:["No services found. Items length: ",m.length]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Debug: ",JSON.stringify(m)]})]}),m.map(r=>e.jsxs("div",{className:"relative",children:[e.jsx(q,{item:r}),e.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>F(r),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded-md text-sm font-medium shadow-lg",children:"Edit"}),e.jsx("button",{onClick:()=>B(r),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-sm font-medium shadow-lg",children:"Delete"})]})]},r.id))]})]})}),C&&e.jsx(Y,{item:C,onSave:O,onCancel:H,onChange:i})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."})]})})});function Y({item:d,onSave:b,onCancel:y,onChange:m}){const[j,N]=x.useState(null),v=(i,w)=>{N(null),m({...d,[i]:w})},C=i=>{if(i.preventDefault(),isNaN(d.price)||d.price<=0){N("Please enter a valid price greater than $0.00");return}if(d.duration&&!d.duration.toLowerCase().match(/(minute|hour|min|hr)/)){N("Duration must include time units (e.g., '60 minutes', '1 hour')");return}const w={...d,price:Math.round(d.price*100)/100};b(w)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Service"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[j&&e.jsx("div",{className:"rounded-md bg-red-50 p-3",children:e.jsx("div",{className:"text-sm text-red-700",children:j})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),e.jsx("input",{type:"text",value:d.name,onChange:i=>v("name",i.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:i=>v("description",i.target.value),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",value:d.price,onChange:i=>v("price",parseFloat(i.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"75.00",title:"Enter price in format: 75.00",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Format: 00.00 (e.g., 75.00)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),e.jsx("input",{type:"text",value:d.duration||"",onChange:i=>v("duration",i.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"60 minutes",title:"Include time units: minutes, hours, mins, hrs"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'Include time units (e.g., "60 minutes", "1 hour")'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("input",{type:"text",value:d.category||"",onChange:i=>v("category",i.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Healing Therapies"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider"}),e.jsx("input",{type:"text",value:d.provider||"",onChange:i=>v("provider",i.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Wellness Center"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md font-medium",children:"Save Changes"}),e.jsx("button",{type:"button",onClick:y,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md font-medium",children:"Cancel"})]})]})]})})}export{Q as default};
