var S=Object.defineProperty;var j=(a,r,s)=>r in a?S(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s;var c=(a,r,s)=>j(a,typeof r!="symbol"?r+"":r,s);import{w,a as n,p as e}from"./chunk-EF7DTUVF-CXM15GyG.js";class N{constructor(){c(this,"services",[]);c(this,"categories",[]);c(this,"providers",[]);c(this,"initialized",!1)}async initialize(){if(!this.initialized)try{const[r,s,t]=await Promise.all([fetch("/data/services.json"),fetch("/data/categories.json"),fetch("/data/providers.json")]);this.services=await r.json(),this.categories=await s.json(),this.providers=await t.json(),this.initialized=!0,console.log(`Loaded ${this.services.length} services, ${this.categories.length} categories, ${this.providers.length} providers`)}catch(r){console.error("Error loading JSON data:",r),this.services=[],this.categories=[],this.providers=[]}}getAllServices(){return this.services.filter(r=>r.active!==!1)}getServiceById(r){return this.services.find(s=>s.id===r&&s.active!==!1)}getServicesByCategory(r){return this.services.filter(s=>s.category===r&&s.active!==!1)}getServicesByProvider(r){return this.services.filter(s=>s.provider===r&&s.active!==!1)}searchServices(r){const s=r.toLowerCase();return this.services.filter(t=>{var o;return t.active!==!1&&(t.name.toLowerCase().includes(s)||t.description.toLowerCase().includes(s)||((o=t.category)==null?void 0:o.toLowerCase().includes(s)))})}addService(r){const s={...r,id:Math.max(...this.services.map(t=>t.id),0)+1,active:!0};return console.log("addService - adding new service:",s.name,"with ID:",s.id),console.log("addService - current services count before add:",this.services.length),this.services.push(s),console.log("addService - services count after add:",this.services.length),this.saveToLocalStorage(),this.loadFromLocalStorage(),console.log("addService - final services count after localStorage reload:",this.services.length),s}updateService(r,s){const t=this.services.findIndex(o=>o.id===r);return t===-1?null:(this.services[t]={...this.services[t],...s},this.saveToLocalStorage(),this.services[t])}deleteService(r){const s=this.services.findIndex(t=>t.id===r);return s===-1?!1:(this.services[s].active=!1,this.saveToLocalStorage(),!0)}getAllCategories(){return this.categories}getCategoryById(r){return this.categories.find(s=>s.id===r)}getAllProviders(){return this.providers}getProviderById(r){return this.providers.find(s=>s.id===r)}getProviderByEmail(r){return this.providers.find(s=>s.email===r)}saveToLocalStorage(){if(typeof window<"u")try{const r=[1,2,3,4,5,6,7],s=this.services.filter(t=>!r.includes(t.id));console.log("saveToLocalStorage - saving",s.length,"new services to localStorage"),console.log("saveToLocalStorage - new services:",s.map(t=>({id:t.id,name:t.name}))),localStorage.setItem("services_data",JSON.stringify(s)),console.log("Services saved to localStorage")}catch(r){console.error("Error saving to localStorage:",r)}}loadFromLocalStorage(){if(typeof window<"u")try{const r=localStorage.getItem("services_data");if(r){const s=JSON.parse(r);console.log("loadFromLocalStorage - found",s.length,"services in localStorage"),console.log("loadFromLocalStorage - current services count before merge:",this.services.length),s.forEach(t=>{const o=this.services.findIndex(d=>d.id===t.id);o>=0?(console.log("loadFromLocalStorage - updating existing service:",t.name),this.services[o]=t):(console.log("loadFromLocalStorage - adding new service:",t.name),this.services.push(t))}),console.log("loadFromLocalStorage - services count after merge:",this.services.length),console.log("Services loaded from localStorage")}else console.log("loadFromLocalStorage - no localStorage data found")}catch(r){console.error("Error loading from localStorage:",r)}}exportData(){return{services:this.services,categories:this.categories,providers:this.providers,exportDate:new Date().toISOString()}}}const l=new N;let m=null;async function f(){return m||(m=l.initialize().then(()=>{l.loadFromLocalStorage()})),m}async function L(){return await f(),l.getAllCategories()}async function k(){return await f(),l.getAllProviders()}const D=w(function(){const[r,s]=n.useState([]),[t,o]=n.useState([]),[d,x]=n.useState(!0),[u,p]=n.useState(null),[h,v]=n.useState(!1),b=async i=>{i.preventDefault(),v(!0),p("Service addition requires a backend server. This feature is disabled in the static GitHub Pages deployment."),v(!1)};return n.useEffect(()=>{async function i(){try{const[g,y]=await Promise.all([L(),k()]);s(g),o(y)}catch(g){console.error("Error loading form data:",g)}finally{x(!1)}}i()},[]),d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading form data..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Add New Service"}),e.jsx("p",{className:"text-gray-600",children:"Create a new holistic service offering"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[u&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-sm text-red-700",children:u})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Service Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Advanced Reiki Healing"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description *"}),e.jsx("textarea",{id:"description",name:"description",rows:4,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Detailed description of the service..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price ($) *"}),e.jsx("input",{type:"number",id:"price",name:"price",min:"0",step:"0.01",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"75.00"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:"Duration"}),e.jsx("input",{type:"text",id:"duration",name:"duration",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"60 minutes"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("select",{id:"category",name:"category",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select a category"}),r.map(i=>e.jsx("option",{value:i.name,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"provider",className:"block text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs("select",{id:"provider",name:"provider",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Select a provider"}),t.map(i=>e.jsx("option",{value:i.name,children:i.name},i.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Image URL"}),e.jsx("input",{type:"url",id:"image",name:"image",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"/images/service-name.jpg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional: URL to service image (relative or absolute)"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:h?"Adding Service...":"Add Service"})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"/services",className:"text-green-600 hover:text-green-500 text-sm font-medium",children:"‚Üê Back to Services"}),e.jsx("a",{href:"/provider-dashboard",className:"text-green-600 hover:text-green-500 text-sm font-medium",children:"Provider Dashboard"})]})})]})]})})});export{D as default};
